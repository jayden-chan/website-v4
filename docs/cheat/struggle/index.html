<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />

    <title>Cheatsheet - SETTMMTOHTS</title>
    <meta
      name="description"
      content="2B Software Engineering Student at the University of Victoria"
    />
    <meta name="author" content="Jayden Chan" />

    <link
      href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://jayden-chan.github.io/website-tmp/styles.css" />
    <script>
      function filterBySearchText() {
        const input = document.getElementById('cheatPageInputID');
        const text = input.value.toUpperCase();
        const ul = document.getElementById('cheatPageListID');
        const li = ul.getElementsByTagName('li');

        let a, txtValue;
        for (let i = 0; i < li.length; i++) {
          a = li[i].getElementsByTagName('h3')[0];
          txtValue = a.textContent || a.innerText;
          if (txtValue.toUpperCase().indexOf(text) > -1) {
            li[i].style.display = '';
          } else {
            li[i].style.display = 'none';
          }
        }
      }
    </script>
  </head>

  <body>
    <header class="centering-h base-wrapper"><div class="fadein mt-32 w-full md:max-w-5xl"><h1 class="text-5xl font-bold mx-4">SETTMMTOHTS</h1><div style="border-bottom-color:white;border-bottom-width:1px" class="mb-6 mx-4"></div><form class="mx-4"><input type="text" name="search" id="cheatPageInputID" onkeyup="filterBySearchText()" placeholder="Type to search" class="text-black min-w-full mb-6 p-2 rounded-lg"/></form><ul id="cheatPageListID" class="mx-4"><li><div class="rounded-lg bg-white p-8 mb-6" style="color:#1B1F22"><h3 class="font-bold text-3xl">[Linux] Setting up CUPS</h3><p class="text-lg"></p><pre class="text-base my-4 rounded-lg p-3 overflow-x-auto" style="background-color:#1D2021;color:#EBDBB2">yay -S cups
systemctl <span class="hljs-built_in">enable</span> org.cups.cupsd.service
systemctl start org.cups.cupsd.service
sudo usermod -a -G sys jayden <span class="hljs-comment"># Prevent forbidden errors</span>
xdg-open http://localhost:631
</pre><small>Tags:<span class="ml-2">linux,</span><span class="ml-2">printing,</span><span class="ml-2">CUPS</span></small></div></li><li><div class="rounded-lg bg-white p-8 mb-6" style="color:#1B1F22"><h3 class="font-bold text-3xl">[Rust] Connect to a postgres db with SSL and an r2d2 connection pool</h3><p class="text-lg"></p><pre class="text-base my-4 rounded-lg p-3 overflow-x-auto" style="background-color:#1D2021;color:#EBDBB2"><span class="hljs-keyword">use</span> openssl::ssl::{SslConnector, SslMethod};
<span class="hljs-keyword">use</span> postgres_openssl::MakeTlsConnector;
<span class="hljs-keyword">use</span> r2d2_postgres::PostgresConnectionManager;
<span class="hljs-keyword">use</span> std::thread;

<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> builder = SslConnector::builder(SslMethod::tls()).unwrap();
    builder.set_verify(openssl::ssl::SslVerifyMode::NONE);
    <span class="hljs-keyword">let</span> connector = MakeTlsConnector::new(builder.build());

    <span class="hljs-keyword">let</span> manager = PostgresConnectionManager::new(
        <span class="hljs-string">"DATABASE_URL"</span>.parse().unwrap(),
        connector,
    );
    <span class="hljs-keyword">let</span> pool = r2d2::Pool::new(manager).unwrap();

    <span class="hljs-keyword">let</span> pool = pool.clone();
    <span class="hljs-keyword">let</span> join_handler = thread::spawn(<span class="hljs-keyword">move</span> || {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"doing the stuff"</span>);
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> client = pool.get().unwrap();
        <span class="hljs-keyword">let</span> results = client.query(<span class="hljs-string">"SELECT * FROM test_data"</span>, &amp;[]).unwrap();

        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{:#?}"</span>, results[<span class="hljs-number">0</span>].get::&lt;<span class="hljs-built_in">usize</span>, <span class="hljs-built_in">String</span>&gt;(<span class="hljs-number">0</span>));
    });

    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"waiting"</span>);
    join_handler.join().unwrap();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"done"</span>);
}
</pre><small>Tags:<span class="ml-2">SETTMMTOHTS,</span><span class="ml-2">rust,</span><span class="ml-2">postgres</span></small></div></li></ul></div></header>
  </body>
</html>
